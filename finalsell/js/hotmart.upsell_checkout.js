if(!Upsell)var Upsell={};if(!Logger)var Logger={};function getQueryParameter(e,t){t||(t=location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?null:n[1]}Logger={debugIsOn:!1,setDebug:function(e){this.debugIsOn=e},error:function(e){this.debugIsOn&&window.alert(e)}},Upsell.Util={getProtocol:function(){return document.location.protocol},render:function(e,t){return e.replace(/\#\{([^{}]*)\}/g,(function(e,n){var o=t[n]||"";return"string"==typeof o||"number"==typeof o?o:e}))},toQueryString:function(e){var t=[];for(var n in e)null!==e[n]&&""!==e[n]&&"function"!=typeof e[n]&&t.push([n,e[n]].join("="));return t.join("&")},isIE:function(e){return!!/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&("function"!=typeof e||e(Number(RegExp.$1)))}},Upsell.Page={getDimensions:function(){var e=document.documentElement;return{width:window.innerWidth||self.innerWidth||e&&e.clientWidth||document.body.clientWidth,height:window.innerHeight||self.innerHeight||e&&e.clientHeight||document.body.clientHeight}}},Upsell.Frame={urlFunnel:function(e){var t=window.location.search;console.log(e);var n=-1!==window.location.hostname.indexOf("buildstaging.com")?"https://app-hotmart-checkout.buildstaging.com/funnel":"https://pay.hotmart.com/funnel";return-1===t.indexOf("?fsid")&&(n+="?"),{funnelFrame:'<iframe id="hotmart_upsell_iframe" class="hotmart_upsell_iframe" src="'+(n+t+"&"+(""!==e.buttonImage?"buttonImage="+e.buttonImage+"&":"")+(""!==e.customStyle?"customStyle="+e.customStyle+"&":""))+'#{query}" width="#{width}" height="#{height}" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>'}},content_template:function(e){return{frame:this.urlFunnel(e).funnelFrame}},getBox:function(){return document.getElementById("box_hotmart")},getQuery:function(e){return Upsell.Util.toQueryString({key:e.key,launcherCode:e.launcherCode})},getFrameParams:function(e){return{protocol:Upsell.Util.getProtocol(),query:this.getQuery(e),width:e.width,height:e.height,buttonImage:e.buttonImage||"",customStyle:e.customStyle||""}},b64EncodeUnicode:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))},show:function(e){e.buttonImage=this.b64EncodeUnicode(e.buttonImage||""),e.customStyle=this.b64EncodeUnicode(e.customStyle||"");var t=this.getFrameParams(e),n=Upsell.Util.render(this.content_template(e).frame,t),o=this.getBox(),r=document.createElement("style");r.innerHTML="@media only screen and (max-width: 720px) { .hotmart_upsell_iframe {width: 100%; height: 380px} }",document.head.appendChild(r),o.innerHTML=n}},Upsell.Widget={setupOptions:function(e,t){null!=t&&Logger.setDebug(t),null!=e?null!==e.key?this.params=e:Logger.error("A chave ('key') do widget deve ser informada. Verifique na variavel 'opts' e adicione a propriedade 'key' com o valor retornado pelo Hotmart"):Logger.error("Nenhum parametro informado ao Widget do Hotmart. Verifique se a variavel 'opts' se ela esta preenchida ou com algum erro de sintaxe.")},show:function(e,t){this.setupOptions(e,t),Upsell.Frame.show(this.params)}};